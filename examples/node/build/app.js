var nodefs = (function() {var module = {};var exports = module.exports = {};var __extends=this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},path=require("path"),time=new Date,LNode=function(){function t(e,n){this.fd=t.fd--,this.layer=e,this.path=n}return t.prototype.getData=function(){return""},t.prototype.setData=function(t){},t.prototype.getPath=function(){return this.layer.mountpoint+this.path},t.prototype.stats=function(){return this.layer.drive.Stats.build(this)},t.prototype.rename=function(t){t=this.layer.getRelativePath(t);var e=this.path;return this.path=t,this.layer.nodes[t]=this,delete this.layer.nodes[e],t},t.fd=-1,t}(),LFile=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getData=function(){return this.layer.files[this.path]},e.prototype.setData=function(t){this.layer.files[this.path]=t.toString()},e.prototype.rename=function(e){var n=this.path;e=t.prototype.rename.call(this,e),this.layer.files[e]=this.layer.files[n],delete this.layer.files[n]},e}(LNode),LDirectory=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(LNode),Layer=function(){function t(t){this.steps=[],this.files={},this.nodes={},this.fds={},this.mountpoint=path.resolve(t),this.steps=this.mountpoint.split(path.sep),this.mountpoint+=path.sep}return t.prototype.getRelativePath=function(t){var e=path.relative(this.mountpoint,t);return e=e.replace(/\\/g,"/")},t.prototype.getNode=function(t){var e=this.getRelativePath(t);return this.nodes[e]?this.nodes[e]:null},t.prototype.getFile=function(t){var e=this.getNode(t);return e instanceof LFile?e:null},t.prototype.getDirectory=function(t){var e=this.getNode(t);return e instanceof LDirectory?e:null},t.prototype.getByFd=function(t){return this.fds[t]},t.prototype.addNode=function(t){t instanceof LFile&&(this.nodes[t.path]=t),this.fds[t.fd]=t;var e=t.path.split(path.sep);if(e.length>1)for(var n=e[0],i=1;i<e.length;i++)this.nodes[n]=new LDirectory(this,n),n+=path.sep+e[i]},t.prototype.generateNodes=function(t){void 0===t&&(t={}),this.files=t;for(var e in this.files){var n=new LFile(this,e);this.addNode(n)}},t.prototype.relativePathIfInMp=function(t){var e=path.relative(this.mountpoint,t);return console.log(e),"."==e[0]&&"."==e[1]?!1:e},t.prototype.isAboveMp=function(t){return t==this.mountpoint.substr(0,t.length)},t.prototype.isInMp=function(t){return this.mountpoint==t.substr(0,this.mountpoint.length)},t.prototype.stepsMatch=function(t){for(var e=Math.min(t.length,this.steps.length),n=0;e>n&&t[n]==this.steps[n];n++);return n},t.prototype.readdir=function(t){if(!t)return[];t[t.length-1]==path.sep&&(t=t.substr(0,t.length-1));var e=t.split(path.sep),n=this.stepsMatch(e),i=this.steps.length==n;if(!i)return n==e.length?this.steps[n]:[];var r=path.relative(this.mountpoint,t),s="^"+(r?r+path.sep:"")+"([^"+path.sep+"]*)("+path.sep+")?",a=[],o=new RegExp(s);for(var p in this.nodes){var u=p.match(o);u&&a.push(u[1])}return a},t}(),Drive=function(){function t(){this.layers=[],this.attached=!1}return t.prototype.createStatsClass=function(t){function e(){this.uid=0,this.gid=0,this.rdev=0,this.blksize=4096,this.ino=0,this.size=0,this.blocks=1,this.atime=time,this.mtime=time,this.ctime=time,this.birthtime=time,this.dev=0,this.mode=0,this.nlink=0,this._isFile=!1,this._isDirectory=!1}if(t){for(var n in t.Stats.prototype)e.prototype[n]=t.Stats.prototype[n];e.prototype.constructor=e}e.prototype.isFile=function(){return this._isFile},e.prototype.isDirectory=function(){return this._isDirectory},e.prototype.isSymbolicLink=function(){return!1},e.build=function(t){var n=new e;if(t instanceof LDirectory)n._isDirectory=!0;else if(t instanceof LFile){var i=t.getData();n.size=i.length,n._isFile=!0}return n},this.Stats=e},t.prototype.attach=function(t){function e(t){return t.sort().filter(function(t,e,n){return!e||t!=n[e-1]})}arguments.length||(t=require("fs")),this.createStatsClass(t);var n=this;t=t||{};var i=t.readFileSync;this.readFileSync=t.readFileSync=function(e,r){var s=n.getFile(e);return s?r?s.getData():new Buffer(s.getData()):i.apply(t,arguments)};var r=t.readFile;this.readFile=t.readFile=function(e,i,s){"function"==typeof i&&(s=i,i={});var a=n.getFile(e);return a?void process.nextTick(function(){"object"==typeof i&&i.encoding?s(null,a.getData()):s(null,new Buffer(a.getData()))}):r.apply(t,arguments)};var s=t.realpathSync;this.realpathSync=t.realpathSync=function(e,i){var r=n.getNode(e);return r?r.getPath():s.apply(t,arguments)};var a=t.realpath;this.realpath=t.realpath=function(e,i,r){"function"==typeof i&&(r=i);var s=n.getNode(e);s?process.nextTick(function(){r(null,s.getPath())}):a.apply(t,arguments)};var o=t.statSync;this.statSync=t.statSync=function(e){var i=n.getNode(e);return i?i.stats():o.apply(t,arguments)};var p=t.lstatSync;this.lstatSync=t.lstatSync=function(e){var i=n.getNode(e);return i?i.stats():p.apply(t,arguments)};var u=t.renameSync;this.renameSync=t.renameSync=function(e,i){var r=n.getNode(e);return r?void r.rename(i):u.apply(t,arguments)};var h=t.rename;this.rename=t.rename=function(e,i,r){var s=n.getNode(e);return s?(s.rename(i),void process.nextTick(r)):h.apply(t,arguments)};var l=t.fstatSync;this.fstatSync=t.fstatSync=function(e){var i=n.getByFd(e);return i?i.stats():l.apply(t,arguments)};var c=t.fstat;this.fstat=t.fstat=function(e,i){var r=n.getByFd(e);r?process.nextTick(function(){i(null,r.stats())}):c.apply(t,arguments)};var f=t.writeFileSync;this.writeFileSync=t.writeFileSync=function(e,i,r){var s=n.getFile(e);return s?void s.setData(i):f.apply(t,arguments)};var y=t.writeFile;this.writeFile=t.writeFile=function(e,i,r,s){"function"==typeof r&&(s=r);var a=n.getFile(e);a?(a.setData(i),s&&process.nextTick(s)):y.apply(t,arguments)};var d=t.existsSync;this.existsSync=t.existsSync=function(e){var i=n.getFile(e);return i?!0:d.apply(t,e)};t.exists;this.exists=t.exists=function(e,i){var r=n.getFile(e);r?i&&process.nextTick(function(){i(!0)}):y.apply(t,arguments)};var v=function(t){var e=[];t=path.resolve(t);for(var n=0;n<this.layers.length;n++){var i=this.layers[n];e=e.concat(i.readdir(t))}return e}.bind(this),g=t.readdirSync;this.readdirSync=t.readdirSync=function(n){var i=v(n);if(g)try{i=i.concat(g.apply(t,arguments))}catch(r){if(!i.length)throw r}return e(i)};var m=t.readdir;this.readdir=t.readdir=function(n,i){var r=v(n);m?m.call(t,n,function(t,n){if(t){if(!r.length)return i(t);i(null,r)}r=r.concat(n),i(null,e(r))}):process.nextTick(function(){i(null,e(r))})};var F=t.appendFileSync;this.appendFileSync=t.appendFileSync=function(e,i){var r=n.getFile(e);return void(r?r.setData(r.getData()+i.toString()):F.apply(t,arguments))};var S=t.appendFile;this.appendFile=t.appendFile=function(e,i,r,s){"function"==typeof r&&(s=r);var a=n.getFile(e);a?process.nextTick(function(){a.setData(a.getData()+i.toString()),s&&s()}):S.apply(t,arguments)}},t.prototype.addLayer=function(t){this.layers.push(t),t.drive=this},t.prototype.getFilePath=function(t){var e=path.resolve(t),n=this.getNode(e);return n?n:null},t.prototype.getNode=function(t){for(var e=path.resolve(t),n=0;n<this.layers.length;n++){var i=this.layers[n].getNode(e);if(i)return i}return null},t.prototype.getFile=function(t){var e=this.getNode(t);return e instanceof LFile?e:null},t.prototype.getDirectory=function(t){var e=this.getNode(t);return e instanceof LFile?e:null},t.prototype.getByFd=function(t){for(var e=0;e<this.layers.length;e++){var n=this.layers[e].getByFd(t);if(n)return n}return null},t.prototype.mount=function(t,e,n){void 0===e&&(e={});var i=new Layer(t);i.generateNodes(e),this.addLayer(i),this.attached||(this.attach(n||null===n?n:require("fs")),this.attached=!0)},t}(),nodefs=function(){};nodefs.LNode=LNode,nodefs.LFile=LFile,nodefs.LDirectory=LDirectory,nodefs.Layer=Layer,nodefs.Drive=Drive,nodefs.volume=new Drive,nodefs.mount=function(t,e,n){void 0===e&&(e={});var i=new Drive;return i.mount(t,e,n),i},module.exports=nodefs;; return module.exports;})();

nodefs.volume.mount("/app", {
  "index.js": "\n\nconsole.log(12345);\n\n"
});

require("/app/index.js");